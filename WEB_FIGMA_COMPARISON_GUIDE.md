# ç½‘é¡µä¸Figmaè®¾è®¡ç¨¿æ¯”å¯¹å·¥å…·ä½¿ç”¨æŒ‡å—
## Website vs Figma Design Comparison Tool Guide

è¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©ä½ è‡ªåŠ¨æˆªå–ç½‘é¡µå¹¶ä¸Figmaè®¾è®¡ç¨¿è¿›è¡Œè§†è§‰æ¯”å¯¹ï¼Œå¿«é€Ÿå‘ç°å®ç°ä¸è®¾è®¡çš„å·®å¼‚ã€‚

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. ç¯å¢ƒé…ç½®

é¦–å…ˆç¡®ä¿ä½ çš„ `.env` æ–‡ä»¶ä¸­åŒ…å«å¿…è¦çš„é…ç½®ï¼š

```bash
# Figmaé…ç½®
FIGMA_ACCESS_TOKEN=your_figma_access_token_here

# å…¶ä»–å¯é€‰é…ç½®
GEMINI_API_KEY=your_gemini_api_key
FEISHU_APP_ID=your_feishu_app_id  
FEISHU_APP_SECRET=your_feishu_app_secret
```

#### 2. è·å–Figmaè®¿é—®ä»¤ç‰Œ

1. ç™»å½• [Figma](https://www.figma.com/)
2. è¿›å…¥ Settings â†’ Personal Access Tokens
3. ç‚¹å‡» "Create new token"
4. å¤åˆ¶ç”Ÿæˆçš„ä»¤ç‰Œåˆ° `.env` æ–‡ä»¶ä¸­

#### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### 4. æµ‹è¯•é…ç½®

```bash
# æ£€æŸ¥åŸºæœ¬é…ç½®
python main.py check-config

# æµ‹è¯•Figma URLè§£æå’Œè®¿é—®
python main.py test-figma-url --figma-url "ä½ çš„Figmaè®¾è®¡ç¨¿URL"
```

### ğŸ“‹ ä½¿ç”¨æ–¹æ³•

#### æµ‹è¯•Figma URLï¼ˆæ¨èå…ˆè¿è¡Œï¼‰

```bash
python main.py test-figma-url \
    --figma-url "https://www.figma.com/file/ABC123/Design?node-id=1%3A2"
```

#### åŸºæœ¬æ¯”å¯¹å‘½ä»¤

```bash
python main.py compare-web-figma \
    --website-url "https://example.com" \
    --figma-url "https://www.figma.com/file/ABC123/Design?node-id=1%3A2"
```

#### å®Œæ•´å‚æ•°

```bash
python main.py compare-web-figma \
    --website-url "https://example.com" \
    --figma-url "https://www.figma.com/file/ABC123/Design?node-id=1%3A2" \
    --device desktop \
    --output-dir reports \
    --wait-time 5
```

### ğŸ“± æ”¯æŒçš„è®¾å¤‡ç±»å‹

| è®¾å¤‡ç±»å‹ | æè¿° | åˆ†è¾¨ç‡ |
|---------|------|-------|
| `desktop` | æ¡Œé¢ç«¯ | 1920Ã—1080 |
| `laptop` | ç¬”è®°æœ¬ | 1366Ã—768 |
| `tablet` | å¹³æ¿ | 768Ã—1024 |
| `mobile` | æ‰‹æœº | 375Ã—667 |
| `iphone` | iPhone | 414Ã—896 |
| `android` | Android | 360Ã—640 |

### ğŸ”§ å‚æ•°è¯´æ˜

- `--website-url` / `-w`: è¦æˆªå›¾çš„ç½‘é¡µURLï¼ˆå¿…éœ€ï¼‰
- `--figma-url` / `-f`: Figmaè®¾è®¡ç¨¿URLï¼ˆå¿…éœ€ï¼‰
- `--device` / `-d`: è®¾å¤‡ç±»å‹ï¼ˆé»˜è®¤ï¼šdesktopï¼‰
- `--output-dir` / `-o`: è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼šreportsï¼‰
- `--wait-time` / `-t`: é¡µé¢åŠ è½½ç­‰å¾…æ—¶é—´ï¼Œç§’ï¼ˆé»˜è®¤ï¼š3ï¼‰

### ğŸ“Š è¾“å‡ºç»“æœ

å·¥å…·ä¼šåœ¨æŒ‡å®šçš„è¾“å‡ºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ—¶é—´æˆ³å‘½åçš„å­ç›®å½•ï¼ŒåŒ…å«ï¼š

1. **ç½‘é¡µæˆªå›¾** (`website_<device>.png`)
   - æŒ‡å®šè®¾å¤‡å°ºå¯¸ä¸‹çš„ç½‘é¡µå®Œæ•´æˆªå›¾

2. **Figmaè®¾è®¡ç¨¿** (`figma_design.png`)
   - ä»Figmaå¯¼å‡ºçš„è®¾è®¡ç¨¿å›¾ç‰‡

3. **å·®å¼‚å¯¹æ¯”å›¾** (`diff_comparison_*.png`)
   - ä¸‰è”å›¾ï¼šç½‘é¡µæˆªå›¾ | Figmaè®¾è®¡ç¨¿ | å·®å¼‚é«˜äº®

4. **è¯¦ç»†æŠ¥å‘Š** (`comparison_report.json`)
   - åŒ…å«æ‰€æœ‰æ¯”å¯¹æŒ‡æ ‡å’Œåˆ†æç»“æœçš„JSONæŠ¥å‘Š

### ğŸ“ˆ æ¯”å¯¹æŒ‡æ ‡

å·¥å…·ä¼šè®¡ç®—å¤šä¸ªç›¸ä¼¼åº¦æŒ‡æ ‡ï¼š

#### 1. ç›¸ä¼¼åº¦åˆ†æ•° (Similarity Score)
- åŸºäºHSVç›´æ–¹å›¾çš„ç›¸ä¼¼åº¦
- èŒƒå›´ï¼š0-1ï¼ˆ1ä¸ºå®Œå…¨ç›¸ä¼¼ï¼‰
- è¯„çº§ï¼šä¼˜ç§€(â‰¥0.9) | è‰¯å¥½(â‰¥0.8) | ä¸€èˆ¬(â‰¥0.7) | è¾ƒå·®(â‰¥0.6) | å¾ˆå·®(<0.6)

#### 2. ç»“æ„ç›¸ä¼¼æ€§æŒ‡æ•° (SSIM)
- è¡¡é‡å›¾åƒç»“æ„çš„ç›¸ä¼¼æ€§
- èŒƒå›´ï¼š-1åˆ°1ï¼ˆ1ä¸ºå®Œå…¨ç›¸ä¼¼ï¼‰
- å¯¹äº®åº¦ã€å¯¹æ¯”åº¦ã€ç»“æ„å˜åŒ–æ•æ„Ÿ

#### 3. å‡æ–¹è¯¯å·® (MSE)
- åƒç´ çº§åˆ«çš„å·®å¼‚åº¦é‡
- æ•°å€¼è¶Šå°è¡¨ç¤ºè¶Šç›¸ä¼¼
- å¯¹é¢œè‰²å·®å¼‚æ•æ„Ÿ

#### 4. æ„ŸçŸ¥å“ˆå¸Œè·ç¦» (Hash Distance)
- åŸºäºå›¾åƒæ„ŸçŸ¥ç‰¹å¾çš„è·ç¦»
- æ•°å€¼è¶Šå°è¡¨ç¤ºè¶Šç›¸ä¼¼
- å¯¹æ•´ä½“ç»“æ„å·®å¼‚æ•æ„Ÿ

#### 5. å·®å¼‚åŒºåŸŸæ•° (Differences Count)
- æ£€æµ‹åˆ°çš„ä¸åŒåŒºåŸŸæ•°é‡
- åæ˜ å¸ƒå±€å·®å¼‚çš„å¤æ‚ç¨‹åº¦

### ğŸ’¡ ä½¿ç”¨æŠ€å·§

#### 1. ç½‘é¡µæˆªå›¾ä¼˜åŒ–
- **ç­‰å¾…æ—¶é—´**ï¼šå¯¹äºåŠ è½½è¾ƒæ…¢çš„é¡µé¢ï¼Œå¢åŠ  `--wait-time` å‚æ•°
- **è®¾å¤‡é€‰æ‹©**ï¼šæ ¹æ®è®¾è®¡ç¨¿çš„ç›®æ ‡è®¾å¤‡é€‰æ‹©åˆé€‚çš„è®¾å¤‡ç±»å‹
- **é¡µé¢çŠ¶æ€**ï¼šç¡®ä¿é¡µé¢å¤„äºæœŸæœ›çš„çŠ¶æ€ï¼ˆå¦‚å·²ç™»å½•ã€ç‰¹å®šé¡µé¢ç­‰ï¼‰

#### 2. Figma URLæ ¼å¼
- **æ ‡å‡†æ ¼å¼**ï¼š`https://www.figma.com/file/{file_id}/{title}?node-id={node_id}`
- **è®¾è®¡æ ¼å¼**ï¼š`https://www.figma.com/design/{file_id}/{title}?node-id={node_id}`
- **ç®€åŒ–æ ¼å¼**ï¼š`https://www.figma.com/file/{file_id}/{title}`ï¼ˆå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªé¡µé¢ï¼‰
- **èŠ‚ç‚¹ID**ï¼šå»ºè®®åŒ…å«å…·ä½“çš„èŠ‚ç‚¹IDï¼Œå¦åˆ™å·¥å…·ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªé¡µé¢
- **æƒé™**ï¼šç¡®ä¿Figmaæ–‡ä»¶å¯¹ä½ çš„ä»¤ç‰Œå¯è§
- **æµ‹è¯•**ï¼šä½¿ç”¨ `test-figma-url` å‘½ä»¤éªŒè¯URLæ˜¯å¦æ­£ç¡®

#### 3. ç»“æœè§£è¯»
- **é«˜ç›¸ä¼¼åº¦ï¼ˆ>0.8ï¼‰**ï¼šå®ç°åŸºæœ¬ç¬¦åˆè®¾è®¡
- **ä¸­ç­‰ç›¸ä¼¼åº¦ï¼ˆ0.6-0.8ï¼‰**ï¼šå­˜åœ¨æ˜æ˜¾å·®å¼‚ï¼Œéœ€è¦è°ƒæ•´
- **ä½ç›¸ä¼¼åº¦ï¼ˆ<0.6ï¼‰**ï¼šå®ç°ä¸è®¾è®¡å·®å¼‚è¾ƒå¤§ï¼Œéœ€è¦é‡æ–°æ£€æŸ¥

### ğŸ” æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜

1. **"FIGMA_ACCESS_TOKEN not found"**
   - ç¡®ä¿ `.env` æ–‡ä»¶ä¸­é…ç½®äº†æ­£ç¡®çš„Figmaè®¿é—®ä»¤ç‰Œ

2. **"Invalid Figma URL format"**
   - æ£€æŸ¥Figma URLæ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿URLåŒ…å«æ–‡ä»¶ID

3. **"æ— æ³•è¯»å–å›¾ç‰‡æ–‡ä»¶"**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®ä¿ç½‘é¡µå¯æ­£å¸¸è®¿é—®
   - æ£€æŸ¥æµè§ˆå™¨é©±åŠ¨æ˜¯å¦æ­£ç¡®å®‰è£…

4. **"æ— æ³•å¯¼å‡ºFigmaå›¾ç‰‡"**
   - æ£€æŸ¥Figmaæ–‡ä»¶æƒé™
   - ç¡®è®¤èŠ‚ç‚¹IDæ˜¯å¦å­˜åœ¨
   - éªŒè¯è®¿é—®ä»¤ç‰Œæƒé™

#### è°ƒè¯•å»ºè®®

1. **å…ˆæ£€æŸ¥é…ç½®**ï¼š
   ```bash
   python main.py check-config
   ```

2. **æµ‹è¯•Figma URL**ï¼š
   ```bash
   python main.py test-figma-url --figma-url "ä½ çš„Figma URL"
   ```

3. **ä½¿ç”¨è¯¦ç»†æ—¥å¿—**ï¼š
   - æŸ¥çœ‹ `logs/app.log` æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

4. **åˆ†æ­¥æµ‹è¯•**ï¼š
   - å…ˆæµ‹è¯•ç®€å•çš„å…¬å¼€ç½‘é¡µ
   - å†æµ‹è¯•å¤æ‚é¡µé¢æˆ–éœ€è¦è®¤è¯çš„é¡µé¢

### ğŸ¯ æœ€ä½³å®è·µ

1. **è®¾è®¡ç¨¿å‡†å¤‡**
   - ç¡®ä¿Figmaè®¾è®¡ç¨¿æ˜¯æœ€æ–°ç‰ˆæœ¬
   - é€‰æ‹©ä¸ç½‘é¡µå¯¹åº”çš„æ­£ç¡®é¡µé¢/ç»„ä»¶
   - ä¿æŒè®¾è®¡ç¨¿çš„æ¸…æ™°åº¦

2. **ç½‘é¡µå‡†å¤‡**
   - ç¡®ä¿ç½‘é¡µå®Œå…¨åŠ è½½
   - å¤„ç†åŠ¨æ€å†…å®¹ï¼ˆå¦‚è½®æ’­å›¾ã€åŠ¨ç”»ç­‰ï¼‰
   - è€ƒè™‘é¡µé¢çš„å“åº”å¼è¡Œä¸º

3. **æ¯”å¯¹ç­–ç•¥**
   - å¯¹äºå¤æ‚é¡µé¢ï¼Œå¯ä»¥åˆ†å—è¿›è¡Œæ¯”å¯¹
   - å®šæœŸè¿›è¡Œæ¯”å¯¹ï¼ŒåŠæ—¶å‘ç°é—®é¢˜
   - ç»“åˆäººå·¥å®¡æŸ¥ï¼Œè‡ªåŠ¨æ¯”å¯¹ä½œä¸ºè¾…åŠ©

### ğŸ“ ç¤ºä¾‹ç”¨æ³•

#### ç¤ºä¾‹1ï¼šåŸºæœ¬æ¯”å¯¹
```bash
python main.py compare-web-figma \
    --website-url "https://www.apple.com" \
    --figma-url "https://www.figma.com/file/example/Apple-Homepage?node-id=1%3A2"
```

#### ç¤ºä¾‹2ï¼šç§»åŠ¨ç«¯æ¯”å¯¹
```bash
python main.py compare-web-figma \
    --website-url "https://m.taobao.com" \
    --figma-url "https://www.figma.com/file/example/Mobile-Design?node-id=5%3A10" \
    --device mobile \
    --wait-time 8
```

#### ç¤ºä¾‹3ï¼šè‡ªå®šä¹‰è¾“å‡ºç›®å½•
```bash
python main.py compare-web-figma \
    --website-url "https://example.com/dashboard" \
    --figma-url "https://www.figma.com/file/example/Dashboard?node-id=15%3A20" \
    --device laptop \
    --output-dir "./comparison-results" \
    --wait-time 5
```

é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥å¿«é€Ÿã€å‡†ç¡®åœ°æ¯”å¯¹ç½‘é¡µå®ç°ä¸è®¾è®¡ç¨¿çš„å·®å¼‚ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œè®¾è®¡ä¸€è‡´æ€§ã€‚ 